
# iRedis

## 多级缓存
### 一个缓存bug引起的对本地缓存的思考
miss、maximumsize、expireAfterAccess

### 本地缓存如何更有效地利用垃圾回收机制
diff（在不等的情况下才put或直接修改已有对象，提高内存利用率，不然每次刷新缓存都要放到年轻代。不能用分离链接法实现，因为老的会引用年轻的(每次put到头部不就可以了？)，导致年轻代不能转移到老年代）

如何避免OOM（弱引用）

缓存淘汰机制


## Lua脚本适配
### 原理

### 环境
如果Redis版本太老不支持Lua脚本？

### 脚本注册中心
类似MyBatis的思路

脚本版本控制

热加载

### 事务特性
Redis是支持事务ACID特性的，Redis的Lua脚本特性不过是将复合的操作在服务器上一并执行，免去多次请求的网络带宽消耗，所以完全可以借助Redis本身实现事务机制：
* Lua脚本本身不能保证原子性，但是Redis的线程模型可以
* 多个脚本不可能同时执行（？）


