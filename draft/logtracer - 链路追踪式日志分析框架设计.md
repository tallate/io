
制作这个小项目的初衷是无奈的，因为公司内部对开发没有很完善的日志分析排查工具，导致现在线上出问题总是要一台机器一台机器地查日志，如果服务复杂一点、链路长一点，更是让人崩溃，在无尽的催促声中掉光头发。

* [ ] 无侵入链路追踪日志抓取
* [ ] 数据传输管道
* [ ] 索引

## 如果能重来？
### 吐槽
在这里再吐槽公司的技术架构几句：
* 对多台机器的情况，可以使用atnodes批量查日志，但是输出是非常不友好，而且也不知道哪台机器不好使了。
* 公司对安全敏感，服务器的权限体系非常复杂，申请服务器的登录权限经常得好几个小时，如果这时线上出问题了，我连登录服务器看日志的权限都没有？
* 服务器登录麻烦，每天密码都要刷新，每天都要频繁输入密码，偶尔密码过期了，又会出来各种问题。
* SOA、微服务现在都是标配了，但是有tracing的基础上，还是得沿着tracing的流程去一台机器一台机器地查，如果是新接手的开发，非常容易被复杂的链路搞昏。

如果当初搞架构的那批人回来重新搞，会不会更好？或者还是沿用他们已经烂熟于心的套路？

### 怎么做？
抱怨到此为止，我们还是回到正事来，如何解决公司内部对日志分析的需求？
第一反应是，为什么不用ELK？ELK是三合一的工具，我们需要付出线上业务服务器比较可观的性能，而且ELK本身也需要大量的维护精力。总而言之，我们大概需要完成这么几件事情：
* 区分管理各种级别的日志：
* 链路追踪：
* 占用较少的资源：对日志的集中化处理需要面对包括内存、网络、磁盘在内的挑战。


## 对现有框架的分析
flume
logstash


## 读取

### 无侵入
Spring Cloud Sleuth支持链路追踪的图形化展示，但是需要在项目中引入Sleuth作为链路追踪组件，也不方便对日志作进一步分析。ELK就反过来了，它没有对链路追踪的直接支持。

### 资源隔离

### 让传输速度更快
压缩
传输协议


## 存储


## 展示

分片，MapReduce

自定义外部指令


## 参考
1. [【教程】如何做apm客户端（关键字：Zipkin、Jaeger、SkyWalking、OpenTracing)](https://juejin.im/post/5cd5481f5188256cbc56e4d9)



