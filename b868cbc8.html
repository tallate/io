<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="参考 想了解Aio与Nio的利弊，为什么Netty没有采用Aio实现？  由来因为毕设的关系，在用友实习了整整半年，在这期间参与了司库云这个项目的开发，因此在试用期最后的转正答辩中我就这段经历进行了一些分享和延伸。">
<meta property="og:type" content="article">
<meta property="og:title" content="记2018年8月9日的转正答辩">
<meta property="og:url" content="https://tallate.github.io/b868cbc8.html">
<meta property="og:site_name" content="Tallate">
<meta property="og:description" content="参考 想了解Aio与Nio的利弊，为什么Netty没有采用Aio实现？  由来因为毕设的关系，在用友实习了整整半年，在这期间参与了司库云这个项目的开发，因此在试用期最后的转正答辩中我就这段经历进行了一些分享和延伸。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://47.88.24.11/记2018年8月9日的转正答辩/契约测试示意图.png">
<meta property="og:image" content="http://47.88.24.11/记2018年8月9日的转正答辩/没有时间戳会怎么样？.png">
<meta property="og:image" content="http://47.88.24.11/记2018年8月9日的转正答辩/没有分布式锁会怎么样？.png">
<meta property="og:image" content="http://47.88.24.11/记2018年8月9日的转正答辩/没有分布式事务会怎么样？.png">
<meta property="og:updated_time" content="2018-09-26T15:44:07.260Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记2018年8月9日的转正答辩">
<meta name="twitter:description" content="参考 想了解Aio与Nio的利弊，为什么Netty没有采用Aio实现？  由来因为毕设的关系，在用友实习了整整半年，在这期间参与了司库云这个项目的开发，因此在试用期最后的转正答辩中我就这段经历进行了一些分享和延伸。">
<meta name="twitter:image" content="http://47.88.24.11/记2018年8月9日的转正答辩/契约测试示意图.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://tallate.github.io/b868cbc8.html"/>





  <title>记2018年8月9日的转正答辩 | Tallate</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tallate</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tallate.github.io/b868cbc8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tallate">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tallate">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">记2018年8月9日的转正答辩</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-10T23:33:05+08:00">
                2018-08-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/yonyou/" itemprop="url" rel="index">
                    <span itemprop="name">yonyou</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="https://segmentfault.com/q/1010000010446129" target="_blank" rel="noopener">想了解Aio与Nio的利弊，为什么Netty没有采用Aio实现？</a></li>
</ol>
<h2 id="由来"><a href="#由来" class="headerlink" title="由来"></a>由来</h2><p>因为毕设的关系，在用友实习了整整半年，在这期间参与了司库云这个项目的开发，因此在试用期最后的转正答辩中我就这段经历进行了一些分享和延伸。<br><a id="more"></a></p>
<h2 id="转正答辩过程"><a href="#转正答辩过程" class="headerlink" title="转正答辩过程"></a>转正答辩过程</h2><p>答辩主要分4个阶段：准备5分钟、PPT展示15分钟、成果展示（代码）10分钟、QA10分钟、评委讨论反馈5分钟。</p>
<h3 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h3><p>我给出了一张自己的照片，希望能拉近和评委之间的距离。</p>
<h3 id="工作内容及成果"><a href="#工作内容及成果" class="headerlink" title="工作内容及成果"></a>工作内容及成果</h3><p>讲学了些什么、工作内容及成果。</p>
<h3 id="部分功能分析和代码演示"><a href="#部分功能分析和代码演示" class="headerlink" title="部分功能分析和代码演示"></a>部分功能分析和代码演示</h3><p>我讲解了每个功能实现起来有哪些难点，并对主要流程给出了流程图进行描述。</p>
<h3 id="总结与展望"><a href="#总结与展望" class="headerlink" title="总结与展望"></a>总结与展望</h3><p>这部分的内容就比较有意思了：</p>
<h4 id="涉及到的设计模式"><a href="#涉及到的设计模式" class="headerlink" title="涉及到的设计模式"></a>涉及到的设计模式</h4><p>根据业务进行分析，可以加入下面这些设计模式进行优化：</p>
<ol>
<li>工厂模式<br>普通重算还款计划和展期重算还款计划的算法有些不同（展期业务后来取消掉了）。<br>使用工厂模式后，方法名相对构造器来说可读性更高，且多了一层包装，减少了暴露、更容易后来修改。</li>
<li>策略模式<br>发起参照的位置可能有多个，每个位置发起参照的过滤条件可能不同，可以将他们包装到单独的类中，客户端使用一个srcType参数调用不同的算法。<br>使用策略模式后，可以减少算法之间的耦合、方便后续加入新的算法。</li>
</ol>
<h4 id="跨服务通信——RMI框架"><a href="#跨服务通信——RMI框架" class="headerlink" title="跨服务通信——RMI框架"></a>跨服务通信——RMI框架</h4><ol>
<li><p>要区分业务异常和RMI框架抛出的异常</p>
<ul>
<li><p>使用返回值表示业务异常（接口本身没有返回值的情况下）</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// ...业务操作</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"外部放款单出现错误："</span> + e.getMessage();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="comment">// 释放锁</span></span><br><span class="line">  infinance.setId(infinance.getInfinancepayid());</span><br><span class="line">  <span class="comment">//new VOLockOperaor().unlock(infinance);</span></span><br><span class="line">  infinance.setId(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>分别定义业务一场和RMI框架异常，分别捕捉，分别记录到不同的log文件中，或后续使用ELK等系统进行分析</p>
</li>
</ul>
</li>
<li>不同服务内的代码无法同步更新<br>因为不同服务运行在不同的实例内，它们的代码无法像传统单体式架构软件那样可以同步更新所有代码，因此也给代码的调试带来了一些困难，调试的方法如下：<ul>
<li>细心编码、滴水不漏，这当然是不大可能的，不是每个人都是Dijkstra；</li>
<li>不厌其烦地测试，在发起远程调用的方法处打断点，把参数粘出来，再在另一个实例内调用对应的接口、将参数传进去调试；</li>
<li>搭建私有化环境，将所有关联服务都放到localhost里调试，这样和生产环境的差异比较大，不适合进行性能测试，且当关联服务比较多时搭建私有化环境非常麻烦（因为要修改很多配置文件，而且配置文件很分散）；</li>
<li>契约测试，将服务消费者与服务提供者解耦。<br><img src="http://47.88.24.11/记2018年8月9日的转正答辩/契约测试示意图.png" alt="X"><br>如上图所示，服务消费者（组件A）会先运行一个单元测试，在这个单元测试中，用户需要给出接口的预计输入和预计输出，运行将会生成一份契约，这份契约既可以作为服务消费者调用该接口的默认行为，也可以作为单元测试用例供服务提供者（组件B）进行功能测试。</li>
</ul>
</li>
<li>远程调用开销远高于本地调用<br>因为远程调用还需要付出网络请求的时间开销，且网络请求必然是不稳定（网络速度受网络情况限制）、不可靠（可能失败）、不安全的（受中间人攻击等），因此有下面这些优化方向：<ul>
<li>更合理的业务划分，减少远程调用，要做到这点必须深刻理解微服务和<strong>DDD</strong>的设计理念；</li>
<li>更高效的通信协议，如果刚开始使用的是HTTP，可以考虑改成TCP或自定义的协议，据说QQ的协议就是从UDP魔改而来的；</li>
<li>更高效的通信模式，一般刚开始使用的是BIO，可以考虑改为NIO或AIO来实现，比如Netty就是一种基于NIO实现的通信框架，而AIO没有特别靠谱的框架，Netty曾去掉了NIO.2（AIO），据说主要是因为效率并不比NIO高；</li>
<li>更高效的序列化/反序列化协议，一般刚开始会使用Java的ObjectInput/OutputStream，可以考虑根据需求改为使用Kryo、Hessian、Protostuff等协议实现对象的序列化。</li>
</ul>
</li>
<li>引入数据一致性风险<br>下面分出一章进行说明。</li>
</ol>
<h4 id="保证数据一致性的3大法宝"><a href="#保证数据一致性的3大法宝" class="headerlink" title="保证数据一致性的3大法宝"></a>保证数据一致性的3大法宝</h4><p>数据满足一致性指的是数据按正常的程序逻辑受到修改，不会出现某处update逻辑没有生效的情况。</p>
<ol>
<li>时间戳/版本号（乐观锁）<ul>
<li>没有会怎么样<br><img src="http://47.88.24.11/记2018年8月9日的转正答辩/没有时间戳会怎么样？.png" alt="X"><br>如上图所示，两个人刚开始都手握数据相同的一份副本，第二个人先修改了数据中的属性B并保存，然后第一个人再修改属性A并保存，此时第一个人发现数据中的B也被修改了，但是却不知道是怎么发生的，这样的用户体验就不大好。<br>单纯使用时间戳当然是不可能保证并发安全的，因为时间戳只是在进入业务逻辑处理前校验一下，对临界区没有任何限制，除非临界区只有一条原子语句。</li>
<li>版本号更好？<br>我认为版本号更好，因为可以和ES（Elasticsearch）兼容，ES使用版本号来控制并发。</li>
<li>司库云中的实现<br>司库云中为每个实体类添加了一个时间戳字段。</li>
</ul>
</li>
<li><p>分布式锁</p>
<ul>
<li>没有会怎么样？<br>会产生并发风险。<br><img src="http://47.88.24.11/记2018年8月9日的转正答辩/没有分布式锁会怎么样？.png" alt="X"><br>如上图所示，在失去分布式锁之后，两者执行更新命令，但指令执行先后顺序是不确定的，因此某些结果会丢失。</li>
<li>服务端要求<br>需要有一个高一致性的存储系统。</li>
<li>客户端要求<br>对客户端的要求比较多，包括lock/unlock操作必须是原子的、无死锁、“解铃还需系铃人”（不会解锁其他人上的锁），因此必须小心实现，当然也可以使用现成的，比如Curator中的实现。</li>
<li>司库云中的实现<br>司库云中实现了一个给予ZooKeeper的分布式锁，但是没有使用Curator，而是直接使用ZooKeeper客户端操作节点实现的，使用下面的代码来调用。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Boolean locked = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  locked = lock(vo)</span><br><span class="line">  checkVersion(vo)</span><br><span class="line">  save(vo)</span><br><span class="line">&#125; <span class="keyword">catch</span>(VersionException e) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> Exception(“”);</span><br><span class="line">&#125; <span class="keyword">catch</span>(LockException e) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(locked) releaseLock(vo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>分布式事务</p>
<ul>
<li>没有会怎么样？<br>执行跨多个库的写操作时会有并发风险。<br><img src="http://47.88.24.11/记2018年8月9日的转正答辩/没有分布式事务会怎么样？.png" alt="X"><br>如上图所示，在调用updateB并返回后服务1内出错了，由于本地事务的存在服务1会回滚，但是服务2就没有办法回滚了。</li>
<li>分布式事务实现要点<br>需要有一个事务协调者记录执行路径，且分布式事务框架必须记录好事务日志用于出错时的手动回滚。</li>
<li>司库云中的实现<br>司库云中使用的是事务补偿机制来实现的，示例代码如下。  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Service.approve(vo);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// ...业务操作</span></span><br><span class="line">&#125; <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">  <span class="comment">// …记录日志</span></span><br><span class="line">  service.unapproved(vo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="编码工作总结"><a href="#编码工作总结" class="headerlink" title="编码工作总结"></a>编码工作总结</h4><ol>
<li>分析<br>仔细分析功能，多听取有经验的前辈的意见。<br>对问题建模，将设计落实到纸上、做好记录。</li>
<li>编码<br>使用设计模式、数据结构和算法原理来优化设计。<br>在实际提交给测试人员之前尽可能列出可能出现的Bug、并做好自测。</li>
<li>维护<br>枚举测试没考虑到的细节，不让问题死灰复燃。<br>思考问题原因，不让问题再次出现。<br>追究相关场景，不让问题反复出现。</li>
</ol>
<h4 id="学习与工作量"><a href="#学习与工作量" class="headerlink" title="学习与工作量"></a>学习与工作量</h4><p>学了些什么，做了些什么</p>
<h4 id="展望下一个一年"><a href="#展望下一个一年" class="headerlink" title="展望下一个一年"></a>展望下一个一年</h4><ol>
<li>深入学习云计算相关技术<br>分布式系统、中间件等原理<br>实际开发框架</li>
<li>改善拖延症、提高工作效率<br>每日笔记<br>记录做每件事所消耗的时间</li>
<li>提升身体素质<br>与所有地球人共勉。</li>
</ol>
<h3 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h3><p>这个环节没把握好节奏，我把所有代码都粗略演示了一遍，实际上把某个比较熟悉的功能演示一遍就可以了。</p>
<h3 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h3><ol>
<li>这个方法的参数为什么没有做非空校验？<br>答：传入的参数不可能为null（保证为空字符串数组、空List等）。</li>
<li>精度怎么控制的？<br>答：在Controller方法返回之前（指出在哪个方法里）。</li>
<li>这个参照（当A需要关联B时从B的所有记录中找出一条，称为A对B有参照，引用了一条B）是整表查询，有经过性能测试吗？<br>答：没有做测试，这个发债模块的数据量不是特别大，而且性能测试这些一般是交给测试部做的。<br>补充：对参照的优化可以参照台账。</li>
<li>已经被修改过的数据怎么防止被另一个用户修改？<br>答（不满意）：这是通过时间戳来实现的，首先两个人都手握同一条数据，一个人修改后会更新数据库里这条数据的时间戳，另一个人对老的数据进行修改时，将数据发到后台，后台会将其和数据库中的相应数据的时间戳进行比较，若小于数据库中的时间则提醒：“该xx已被修改，请刷新后重试。”。</li>
<li>这个时间戳是服务器时间还是客户端时间？<br>答：我认为都可以，因为客户无法感知这个时间。<br>补充：应该是取服务器时间，在新增的时候取服务器时间作为初始值，之后由客户端将时间戳原封不动地传到后台，后台先跟数据库里的值进行比对，如果无误再用服务器的时间更新时间戳。<br>补充2：客户发起修改请求的时候篡改时间戳怎么办？给他篡改吧，本身时间戳的目的就是提升用户体验，如果用户知道会发生什么事情，这么做也没什么影响。</li>
<li>你刚才在远程调用那里说应该区分框架异常和业务异常，但是你在Sdk方法（远程调用方法）里面却一块捕捉了？对于异常处理你有什么想法吗？<br>答：我在后来做毕设的时候就是为不同的情况定义了不同的异常类，分别进行捕捉（说明我后来思考过这个问题）。我认为框架异常和业务异常应该区分开来，他们应该交给不同的人进行分析。</li>
<li>两个人同时对一笔单据推单，怎么控制并发？应该在上游还是下游做控制？<br>答（不满意）：^<em>^#@&amp;</em>$（没反应过来推单业务的执行流程）。<br>补充（一位评委老哥给出了具体解答，点个赞，但是这里记不大清了）：多个服务器实例的情况下应该在上游加锁，下游再校验一下上游是否已经正确做了操作。<br>补充2：如果是单服务器实例的情况下直接用内存锁其实就够了。下游的校验主要是为了保证只能推出来一条。<br>补充3：应用可能复制、数据库可能复制，需要分别进行讨论。在应用层，可以在上游进行加锁、下游校验是否重复操作。单库下的DB层，可以使用行锁锁定该笔数据（有分布式锁的情况下数据库内加锁其实没有什么意义）。多库下的DB层，因为一个业务操作可能涉及到写多个库，一般情况下需要使用分布式事务来保证原子性。拆库后的DB层，根据拆库方式的不同需要进行各数据库副本之间的同步。<br>补充4：性能、伸缩性…，问题很多，需要另外讨论了。</li>
<li>分布式事务相对补偿事务有什么好处？<br>答：有一次平台那边的审批出错，没有生成对应的流程实例，后面业务报错的时候直接调用逆操作方法，结果前端报的错是“取消审批失败”，就比较荒唐（解释补偿事务有什么问题）。淘宝就提出了一种分布式事务TCC，它把每个业务操作分为Try-Confirm-Cancel三个阶段，其中Try阶段可以锁定资源，还能检验链路是否畅通，我觉得这是优于补偿事务的比较好的地方。</li>
<li>（HRBP问）能说明一下微服务的好处吗？<br>答（答得比较乱）：微服务有一个相近的概念是SOA，它们之间的主要区别是治理方式，SOA依赖消息总线（ESB）来注册所有的服务，当一个服务需要调用另一个服务的时候它需要从消息总线里获取那个服务的地址等信息，但微服务架构则没有这个概念，服务之间通过REST协议进行通信，没有ESB的概念。<br>相对单体式架构来说，微服务将软件划分成一个个相对独立的服务，每个服务负责的业务范围都是足够小的，这样不会给开发带来太多的负担，服务启动速度更快、某个服务出错也不会导致整个应用不可用，缺点是服务之间的调用需要付出网络请求的代价，且涉及跨库写的业务操作会产生不一致的风险。</li>
</ol>
<h2 id="遗憾"><a href="#遗憾" class="headerlink" title="遗憾"></a>遗憾</h2><p>因为某些不可抗力的关系（其实是拖延症犯了），我的转正答辩准备得非常仓促，从准备材料到准备答辩不过2天时间，所以答辩过程中出现了很多问题，其中比较严重的被当场指出了，有下面几点：</p>
<ol>
<li>理论没有落地。<br>比如对分布式事务的论述，答辩委员更多看的是代码的规范与否，插入一些没有什么关联的东西多少会给评委留下装逼的印象。我计划以后多看一些开源项目的源码，明白它们的原理，这样在讲的时候才不会显得那么浮。</li>
<li>代码没有经过严格性能测试。<br>这个问题比较严重，主要是当时小组成员中途流失了很多，有些节点的任务直接掉到了我头上，几个前端又催得紧，回去又要准备毕设的东西，所以性能测试基本是没有测的。我计划以后学一些JMeter、ab这样的工具。</li>
<li>代码不够规范。<br>代码规范是程序员的节操，平时我看过类似介绍代码规范的文章，也在IDEA中装了相关的插件（findbugs、alibaba规范插件），却在公司代码中没做好，不是节操掉了，而是也和时间匆忙有关系，其实没有多少时间去考虑规范不规范的问题，甚至在台账Service中出现了达到300行的方法。为此我打算接下来学习一下阿里的Java编码规范，考个证，应该不会花费太多时间，做题也比干读公司发的规范强。<br>对于这种演讲的场合，最好还是捡自己满意的一两个功能讲一下代码，我把大部分代码都展示了一下，既浪费时间、又讲不明白。</li>
<li>超时了。<br>因为没有事先模拟答辩，最后这30页PPT讲得太久了，结果把后面那个人给挤延期了，抱歉。</li>
</ol>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/c85cb609.html" rel="next" title="DesignPatterns">
                <i class="fa fa-chevron-left"></i> DesignPatterns
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/9b8ed85e.html" rel="prev" title="公司大佬关于编码规范的一次分享">
                公司大佬关于编码规范的一次分享 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div id="gitalk-container"></div>

  

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">tallate</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">46</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">1.</span> <span class="nav-text">参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#由来"><span class="nav-number">2.</span> <span class="nav-text">由来</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转正答辩过程"><span class="nav-number">3.</span> <span class="nav-text">转正答辩过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自我介绍"><span class="nav-number">3.1.</span> <span class="nav-text">自我介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#工作内容及成果"><span class="nav-number">3.2.</span> <span class="nav-text">工作内容及成果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部分功能分析和代码演示"><span class="nav-number">3.3.</span> <span class="nav-text">部分功能分析和代码演示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结与展望"><span class="nav-number">3.4.</span> <span class="nav-text">总结与展望</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#涉及到的设计模式"><span class="nav-number">3.4.1.</span> <span class="nav-text">涉及到的设计模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#跨服务通信——RMI框架"><span class="nav-number">3.4.2.</span> <span class="nav-text">跨服务通信——RMI框架</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#保证数据一致性的3大法宝"><span class="nav-number">3.4.3.</span> <span class="nav-text">保证数据一致性的3大法宝</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#编码工作总结"><span class="nav-number">3.4.4.</span> <span class="nav-text">编码工作总结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#学习与工作量"><span class="nav-number">3.4.5.</span> <span class="nav-text">学习与工作量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#展望下一个一年"><span class="nav-number">3.4.6.</span> <span class="nav-text">展望下一个一年</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代码展示"><span class="nav-number">3.5.</span> <span class="nav-text">代码展示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QA"><span class="nav-number">3.6.</span> <span class="nav-text">QA</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#遗憾"><span class="nav-number">4.</span> <span class="nav-text">遗憾</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tallate</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '72bdd1c9479eb0679788',
          clientSecret: '62c9c0cb45aadb1478ca66cfc3c69c9623f50290',
          repo: 'tallate.github.io',
          owner: 'tallate',
          admin: ['tallate'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>



  





  

  

  
  

  

  

  


  undefined

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"modle":"wanko","pluginModelPath":"assets/","moblie":{"show":false},"display":{"width":150,"height":300},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
